---
title: IP에 대해
category: [CS]
tag: [network]
toc: true
toc_label: 목차
toc_sticky: true
---
IP는 Internet Protocol의 약자로 네트워크 계층의 가장 대표적인 프로토콜이다. 두 노드간의 전송 경로를 확립해 주는 역할을 한다. 
# IP 주소 체계
IPv4 기준으로 IP 주소는 32비트를 사용한다. 보통 8자리마다 점을 직어서 구분하고 A,B,C,D,E로 총 5개의 클래스로 나뉜다.
A,B,C는 유니캐스트 D클래스는 멀티 캐스트에 사용하고 E클래스는 테스트용으로 사용한다고 한다.


A,B,C 클래스는 아래 그림처럼 구분되는데 ip주소에 0이 언제 처음 나온는 지에 따라 클래스를 구분한다. 만약 1이 언제 처음 나오는지를 기준으로 했으면 나눠지는 부분이 128, 64, 32 처럼 2의 배수로 딱 나눠 떨어져서 알아보기 쉬웠을것 같다는 생각이 든다.


* 클래스를 이렇게 나누면 모든 주소를 포함하는지 궁금해서 계산해 봤는데 클래스를 나누는 기준을 0이 언제 처음 나오는 지가 아니고 앞에 1이 몇개인지로 구분해야 모든 주소를 포함할 수 있다는 것을 알게 되었다. 
찾아보니 E클래스는 11110000~11111111까지가 맞았다.

> A클래스 : 0xxxxxxx부터 2의 31제곱 개   
B클래스 : 10xxxxxx부터 2의 30제곱 개   
C클래스 : 110xxxxx부터 2의 29제곱 개   
D클래스 : 1110xxxx부터 2의 28제곱 개   
E클래스 : 1111xxxx부터 2의 28제곱 개   

> 다 더하면 2의 32제곱이 된다.

![ipclass](/assets/ip/ip-class.png)   
## A 클래스
맨 앞 1비트가 0으로 시작한다. 뒤 7비트가 네트워크의 주소로 사용되고 나머지 24비트가 호스트 주소로 사용된다.   

## B 클래스
맨앞 두 비트가 10으로 시작한다. 뒤 14(6+8)비트가 네트워크 주소로 사용되고 나머지 16비트가 호스트 주소로 사용된다.

## C 클래스
맨앞 세 비트가 110으로 시작한다. 뒤 22(6+8+8)비트가 네트워크 주소로 사용되고 나머지 8비트가 호스트 주소로 사용된다.


주변에서 자주 보는 공유기가 C클래스 주소 체계를 사용한다. 와이파이를 접속했을 때 ipconfig나 ifconfig로 ip정보를 확인하면 192. 으로 시작하는 경우가 대부분이다. 가정에서 사용하는 공유기는 관리하는 호스트가 256개 정도면 충분하기 때문에
C 클래스 주소 체계가 많이 사용된다.

# 사설 네트워크
거기에 더해서 공유기에 연결된 ip주소를 잘 보면 192.168인 것을 볼 수 있는데 이것은 C클래스의 사설 네트워크임을 의미한다.
사설 네트워크는 공인네트워크 주소 부족 현상을 해결하기 위해 만들어진 개념이다.


ipv4주소는 32비트로 약 21억개의 주소를 표현할 수 있다. 처음에 ip주소를 만들 때는 이정도면 충분 할 줄 알았는데 핸드폰이 보급 되면서 네트워크를 쓰는 장비들이 아주 많아졌기 때문에 ip주소가 부족해 졌다고 한다.
그래서 사설 네트워크 주소를 만들고 한 네트워크 망 안에서 이 주소로 구분을 한다. 이러면 모든 기기에 ip주소를 할당할
필요가 없어지기 때문에 아직까지 ipv4가 현역으로 사용 될 수 있다고 들었다.

# CIDR : Classless Inter Domain Routing
어떤 네트워크 구축 환경에서 호스트들이 300개 정도 필요하다고 가정해보자. 그럼 C클래스는 사용할 수 없다. 왜냐하면
C클래스는 호스트를 최대 256개만 표현할 수 있기 때문이다. 그럼 50개정도 때문에 B클래스를 써야하는 상황이 생긴다.
그러면 B클래스는 약 6만5천개의 호스트를 표현하기 때문에 매우 많은 자원이 낭비된다. 또한 B클래스를 사용할때 지불하는
비용이 더 크기 때문에 돈까지 낭비하는 상황이 생긴다. 이를 해결하기 위해 도입된 것이 CIDR이다.


B클래스 ip를 가진 업체가 ip주소를 쪼개서 하위 9비트를 호스트 주소로 표현하는 주소 체계를 제공한다. 그럼 512개의
호스트를 표현 할 수 있어 위 문제가 해결된다. 표현할 때는 128.157.123.1/23 으로 표현한다. 슬래쉬 뒤의 숫자가 네트워크 주소의 비트수를 표현한다.